[pytest]
markers =
    generated: Tests generated by codegen, which use data from the testing service.
    long-running: Long running tests

[tox]
envlist = py36

[testenv]
passenv = CLI_TESTS_ADMIN_PASS_PHRASE OCI_CLI* PYTHONHASHSEED RECORD_ONLY SKIP_BASIC_TESTS SUPPRESS_PYTHON2_WARNING ALLOW_JSON_TEST_FAILURES OCI_PYSDK_USING_EXPECT_HEADER
deps =
    -r{toxinidir}/requirements.txt 
setenv =
    # Required so the oci script imports oci_cli from the venv
    PYTHONPATH = {envsitepackagesdir}/oci_cli:
commands =
    {toxinidir}/scripts/basic_cli_test_script.sh
    py.test -s []

[testenv:unit]
setenv =
    # Required so the oci script imports oci_cli from the venv
    PYTHONPATH = {envsitepackagesdir}/oci_cli:
commands=
    py.test -s tests/unit []

[testenv:generated_p36]
basepython = python3.6
setenv =
    # Required so the oci script imports oci_cli from the venv
    PYTHONPATH = {envsitepackagesdir}/oci_cli:
commands=
    py.test -s [] --junitxml=result.xml

[testenv:flake8]
basepython = python3.6
deps = 
    flake8 == 3.6.0
    pip == 20.2.4
commands =
    flake8 --ignore=F841,E501,W503,W292 src services tests scripts/install/install.py
